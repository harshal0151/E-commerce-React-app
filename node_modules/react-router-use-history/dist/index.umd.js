!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react-router-dom"),require("use-sync-external-store/shim")):"function"==typeof define&&define.amd?define(["exports","react","react-router-dom","use-sync-external-store/shim"],e):e((t||self).reactRouterUseHistory={},t.React,t.reactRouterDom,t.shim)}(this,function(t,e,n,r){function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a,i=/*#__PURE__*/o(e);function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(a||(a={}));const c="popstate";function s(t){return{usr:t.state,key:t.key}}function l(t,e,n,r){return void 0===n&&(n=null),u({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof e?function(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}(e):e,{state:n,key:(null==e?void 0:e.key)||r||Math.random().toString(36).substr(2,8)})}var f;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(f||(f={}));var d=e.createContext(null);function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h.apply(this,arguments)}var p=function(){var t=e.useContext(n.UNSAFE_NavigationContext).navigator,r=e.useContext(d);return h({},t,{listen:function(t){return null==r||r.ref.current.add(t),function(){null==r||r.ref.current.delete(t)}}})},v=function(){var t=n.UNSAFE_DataRouterContext&&e.useContext(n.UNSAFE_DataRouterContext);if(t){var r,o,a=null==t||null==(r=t.router)?void 0:r.state;return h({get location(){return null==a?void 0:a.location},get action(){return null==a?void 0:a.historyAction},listen:null==t||null==(o=t.router)?void 0:o.subscribe},null==t?void 0:t.navigator)}return p()};t.BrowserRouter=function(t){var r,o=t.basename,u=t.children,f=t.window,h=t.history,p=e.useRef(new Set),v=e.useRef();null==v.current&&(v.current=h||(void 0===(r={window:f,v5Compat:!0})&&(r={}),function(t,e,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,u=o.history,f=a.Pop,d=null;function h(){f=a.Pop,d&&d({action:f,location:p.location})}let p={get action(){return f},get location(){return function(t,e){var n,r;let{pathname:o,search:a,hash:i}=t.location;return l("",{pathname:o,search:a,hash:i},(null==(n=e.state)?void 0:n.usr)||null,(null==(r=e.state)?void 0:r.key)||"default")}(o,u)},listen(t){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(c,h),d=t,()=>{o.removeEventListener(c,h),d=null}},createHref:t=>function(t,e){return"string"==typeof e?e:function(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}(e)}(0,t),push:function(t,e){f=a.Push;let n=l(p.location,t,e),r=s(n),c=p.createHref(n);try{u.pushState(r,"",c)}catch(t){o.location.assign(c)}i&&d&&d({action:f,location:n})},replace:function(t,e){f=a.Replace;let n=l(p.location,t,e),r=s(n),o=p.createHref(n);u.replaceState(r,"",o),i&&d&&d({action:f,location:n})},go:t=>u.go(t)};return p}(0,0,0,r)));var y=v.current,g=e.useState({action:y.action,location:y.location}),m=g[0],b=g[1];return e.useLayoutEffect(function(){return y.listen(function(t){p.current.forEach(function(e){return e(t)}),b(t)})},[y]),i.default.createElement(d.Provider,{value:{ref:p}},i.default.createElement(n.Router,{basename:o,children:u,location:m.location,navigationType:m.action,navigator:y}))},t.UNSAFE_SubscriptionContext=d,t.useBrowserRouterHistory=p,t.useHistory=v,t.useHistorySelector=function(t){var e=v();return r.useSyncExternalStore(e.listen,function(){return t(e)})}});
//# sourceMappingURL=index.umd.js.map
